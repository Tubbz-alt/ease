
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Django: alert_config_app &#8212; EASE  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Django: account_mgr_app" href="account_mgr_app.html" />
    <link rel="prev" title="&lt;no title&gt;" href="django_app.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="django-alert-config-app">
<h1>Django: alert_config_app<a class="headerlink" href="#django-alert-config-app" title="Permalink to this headline">¶</a></h1>
<p>The alert_config_app builds the django pages and database entries responsible
for managing the alerts engine.</p>
<div class="section" id="module-alert_config_app.forms">
<span id="forms-py"></span><h2>forms.py<a class="headerlink" href="#module-alert_config_app.forms" title="Permalink to this headline">¶</a></h2>
<p>forms.py defines the input fields for data entry pages generated by Django.</p>
<p>The classes contained here describe sets of data entry fields that django uses
to construct form pages and validate the incoming information.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Fields referencing databse entries (e.g. new_pv’s use of PV.objects.all())
MUST be placed inside the init funciton. Failure to do
so will break djang’s ability to migrate and has the potential to interfere
with other features.</p>
</div>
<dl class="class">
<dt id="alert_config_app.forms.configAlert">
<em class="property">class </em><code class="descclassname">alert_config_app.forms.</code><code class="descname">configAlert</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.forms.configAlert" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the fields for an alert. These are the editable fields that
presented to users who have ownership over this alert.</p>
<dl class="attribute">
<dt id="alert_config_app.forms.configAlert.new_owners">
<code class="descname">new_owners</code><a class="headerlink" href="#alert_config_app.forms.configAlert.new_owners" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.MultipleChoiceField</em> – Provides dropdown selection of profiles who can own this object.
The user can give ownership to themselves and others. This does NOT
register these users to receive alerts. This attr is defined in
the __init__ due to its reliance on DB items.</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.forms.configAlert.new_name">
<code class="descname">new_name</code><a class="headerlink" href="#alert_config_app.forms.configAlert.new_name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.CharField</em> – Changes to the alert name can be entered in this field.abs</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.forms.configAlert.new_subscribe">
<code class="descname">new_subscribe</code><a class="headerlink" href="#alert_config_app.forms.configAlert.new_subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.BooleanField</em> – Determines whether the current user is subscribed.</p>
</dd></dl>

<dl class="method">
<dt id="alert_config_app.forms.configAlert.clean_new_owners">
<code class="descname">clean_new_owners</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.forms.configAlert.clean_new_owners" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive input string for the new_owners field and return users list</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">This queryset contains the list of profiles (NOT User objects) to
have ownership of this Alert.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list of Django.db.models.query.Queryset</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="alert_config_app.forms.configAlert.clean_new_subscribe">
<code class="descname">clean_new_subscribe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.forms.configAlert.clean_new_subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the subscription option</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if the user has selected the subscriber option</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Todo field isn’t working? Confirm that this function works with
missing fields.
This field can occasionally report None and is notorious for
bugging after changes</p>
</div>
</dd></dl>

<dl class="staticmethod">
<dt id="alert_config_app.forms.configAlert.parse_usernames">
<em class="property">static </em><code class="descname">parse_usernames</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.forms.configAlert.parse_usernames" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive string of usernames separated by commas, first/last
optional and extract the username strings.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> (<em>str</em>) – This takes a string containing the usernames. Usernames must be
comma separated and may optionally be followed by  ‘(last_name,
first_name’. The first and last names are not checked, they are
only present for user readability and will be removed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">List of username strings.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><code class="xref py py-obj docutils literal"><span class="pre">set</span></code> of <code class="xref py py-obj docutils literal"><span class="pre">str</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="alert_config_app.forms.configTrigger">
<em class="property">class </em><code class="descclassname">alert_config_app.forms.</code><code class="descname">configTrigger</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.forms.configTrigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the fields for an individual trigger</p>
<dl class="attribute">
<dt id="alert_config_app.forms.configTrigger.new_pv">
<code class="descname">new_pv</code><a class="headerlink" href="#alert_config_app.forms.configTrigger.new_pv" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.ChoiceField</em> – Provides dropdown selection of PV’s to link to this trigger. This
attr is defined in the __init__ due to its reliance on DB items.</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.forms.configTrigger.new_compare">
<code class="descname">new_compare</code><a class="headerlink" href="#alert_config_app.forms.configTrigger.new_compare" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.ChoiceField</em> – Describes the comparison operation between the PV’s value and
the triggering value (new_value)</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.forms.configTrigger.new_name">
<code class="descname">new_name</code><a class="headerlink" href="#alert_config_app.forms.configTrigger.new_name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.CharField</em> – Changes to the trigger name can be entered in this field</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.forms.configTrigger.new_value">
<code class="descname">new_value</code><a class="headerlink" href="#alert_config_app.forms.configTrigger.new_value" title="Permalink to this definition">¶</a></dt>
<dd><p><em>forms.FloatField</em> – Changes to the triggering value can be entered in this field</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="alert_config_app.forms.detailAlert">
<em class="property">class </em><code class="descclassname">alert_config_app.forms.</code><code class="descname">detailAlert</code><span class="sig-paren">(</span><em>data=None</em>, <em>files=None</em>, <em>auto_id='id_%s'</em>, <em>prefix=None</em>, <em>initial=None</em>, <em>error_class=&lt;class 'django.forms.utils.ErrorList'&gt;</em>, <em>label_suffix=None</em>, <em>empty_permitted=False</em>, <em>field_order=None</em>, <em>use_required_attribute=None</em>, <em>renderer=None</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.forms.detailAlert" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the fields for an alert. These fields are presented when the user
does NOT own this alert. The only option is to subscribe.</p>
</dd></dl>

</div>
<div class="section" id="module-alert_config_app.views">
<span id="views-py"></span><h2>views.py<a class="headerlink" href="#module-alert_config_app.views" title="Permalink to this headline">¶</a></h2>
<p>Django consults this page to determine the html that should be sent
to the user</p>
<dl class="function">
<dt id="alert_config_app.views.alert_delete">
<code class="descclassname">alert_config_app.views.</code><code class="descname">alert_delete</code><span class="sig-paren">(</span><em>request</em>, <em>pk=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.alert_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws deletion page for an alert.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pk</strong> (<em>int</em>) – DB index of the displayed alert. PK is sent automatically from the
regex in url.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Having deletion occur on a post request is safer than a get request.
This page is designed solely to present the form required for receiving
the post request.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="alert_config_app.views.alerts_all">
<em class="property">class </em><code class="descclassname">alert_config_app.views.</code><code class="descname">alerts_all</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.alerts_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Currently unused - Draw a page with a full list of PVs and Alerts</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<em>django.http.HttpRequest</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>render</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">django.http.HttpResponse</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="alert_config_app.views.alerts_all.model">
<code class="descname">model</code><a class="headerlink" href="#alert_config_app.views.alerts_all.model" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Alert</span></code></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="alert_config_app.views.list_all">
<code class="descclassname">alert_config_app.views.</code><code class="descname">list_all</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.list_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Currently unused - Draw a page with a full list of PVs and Alerts.</p>
<dl class="attribute">
<dt id="alert_config_app.views.request">
<code class="descclassname">alert_config_app.views.</code><code class="descname">request</code><a class="headerlink" href="#alert_config_app.views.request" title="Permalink to this definition">¶</a></dt>
<dd><p><em>django.http.HttpRequest</em></p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">django.http.HttpResponse</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="alert_config_app.views.pv_create">
<em class="property">class </em><code class="descclassname">alert_config_app.views.</code><code class="descname">pv_create</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.pv_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws page for PV creation</p>
<dl class="attribute">
<dt id="alert_config_app.views.pv_create.template_name">
<code class="descname">template_name</code><a class="headerlink" href="#alert_config_app.views.pv_create.template_name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>string</em> – Determines the .html in aler_config_app/templates to use.</p>
</dd></dl>

<dl class="method">
<dt id="alert_config_app.views.pv_create.form_valid">
<code class="descname">form_valid</code><span class="sig-paren">(</span><em>form</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.pv_create.form_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives and processes the form</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.views.pv_create.model">
<code class="descname">model</code><a class="headerlink" href="#alert_config_app.views.pv_create.model" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Pv</span></code></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="alert_config_app.views.pvs_all">
<em class="property">class </em><code class="descclassname">alert_config_app.views.</code><code class="descname">pvs_all</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.pvs_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws page listing all PVs. Handles pagination.</p>
<dl class="attribute">
<dt id="alert_config_app.views.pvs_all.template_name">
<code class="descname">template_name</code><a class="headerlink" href="#alert_config_app.views.pvs_all.template_name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>string</em> – Determines the .html in aler_config_app/templates to use.</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.views.pvs_all.paginate_by">
<code class="descname">paginate_by</code><a class="headerlink" href="#alert_config_app.views.pvs_all.paginate_by" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em> – number of PVs per page</p>
</dd></dl>

<dl class="method">
<dt id="alert_config_app.views.pvs_all.get_queryset">
<code class="descname">get_queryset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.views.pvs_all.get_queryset" title="Permalink to this definition">¶</a></dt>
<dd><p>Organizes the Pvs Alphabetically</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.views.pvs_all.model">
<code class="descname">model</code><a class="headerlink" href="#alert_config_app.views.pvs_all.model" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Pv</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-alert_config_app.models">
<span id="models-py"></span><h2>models.py<a class="headerlink" href="#module-alert_config_app.models" title="Permalink to this headline">¶</a></h2>
<p>Manage alert_config data models</p>
<dl class="class">
<dt id="alert_config_app.models.Alert">
<em class="property">class </em><code class="descclassname">alert_config_app.models.</code><code class="descname">Alert</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.models.Alert" title="Permalink to this definition">¶</a></dt>
<dd><p>This model represents EASE’s alerts</p>
<p>The Alert relates a collection of triggers to subscribers and owners.
It is inteded to be directly editable by all users who are owners.
When a linked trigger is tripped, alerts are sent to the subscribed
users.</p>
<dl class="attribute">
<dt id="alert_config_app.models.Alert.name">
<code class="descname">name</code><a class="headerlink" href="#alert_config_app.models.Alert.name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>django.db.models.CharField</em> – String defining the user-visible name for alerts.</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.models.Alert.subscriber">
<code class="descname">subscriber</code><a class="headerlink" href="#alert_config_app.models.Alert.subscriber" title="Permalink to this definition">¶</a></dt>
<dd><p><em>django.db.models.ManyToManyField</em> – Django relationship pointing to the profiles of users who will be
notified when this alert triggers. View its members using
Alert.subscriber.all()</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.models.Alert.owner">
<code class="descname">owner</code><a class="headerlink" href="#alert_config_app.models.Alert.owner" title="Permalink to this definition">¶</a></dt>
<dd><p><em>django.db.models.ManyToManyField</em> – Django relationship pointing to the profiles of users who will have the
power to edit this alert. View its members using Alert.owner.all()</p>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.models.Alert.lockout_duration">
<code class="descname">lockout_duration</code><a class="headerlink" href="#alert_config_app.models.Alert.lockout_duration" title="Permalink to this definition">¶</a></dt>
<dd><p><em>django.db.models.DurationField</em> – This specifies a flat time limit between the times at which successive
alerts can be sent to users.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This attribute will likely undergo significant change or possibly
removal during the planned integration of the IEC 62682 plans</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="alert_config_app.models.Alert.last_sent">
<code class="descname">last_sent</code><a class="headerlink" href="#alert_config_app.models.Alert.last_sent" title="Permalink to this definition">¶</a></dt>
<dd><p><em>django.db.models.DateTimeField</em> – Specifies the time at which the last alert was sent. See the proceeding
note for potential changes</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This attribute will likely undergo significant change or possibly
removal during the planned integration of the IEC 62682 plans</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="alert_config_app.models.Pv">
<em class="property">class </em><code class="descclassname">alert_config_app.models.</code><code class="descname">Pv</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.models.Pv" title="Permalink to this definition">¶</a></dt>
<dd><p>Each PV instance is made to match with an EPICS PV.</p>
<p>Alerts engine consults the table of PVs to decide which
entries much be queried from the archiver</p>
</dd></dl>

<dl class="class">
<dt id="alert_config_app.models.Trigger">
<em class="property">class </em><code class="descclassname">alert_config_app.models.</code><code class="descname">Trigger</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#alert_config_app.models.Trigger" title="Permalink to this definition">¶</a></dt>
<dd><p>Individual ‘trip statemet’</p>
<p>Each trigger defines a trip condition relating a numeric value, condition
and PV. Each trigger can be owned by a single Alert. Triggers are not
edited directly but through the alerts config page.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">EASE</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">EASE sections:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Django: alert_config_app</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-alert_config_app.forms">forms.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-alert_config_app.views">views.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-alert_config_app.models">models.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="account_mgr_app.html">Django: account_mgr_app</a></li>
<li class="toctree-l1"><a class="reference internal" href="alerts_engine.html">alerts_engine</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="django_app.html">&lt;no title&gt;</a><ul>
      <li>Previous: <a href="django_app.html" title="previous chapter">&lt;no title&gt;</a></li>
      <li>Next: <a href="account_mgr_app.html" title="next chapter">Django: account_mgr_app</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Nolan W. Brown.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/alert_config_app.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>